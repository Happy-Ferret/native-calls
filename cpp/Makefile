include $(NACL_SDK_ROOT)/tools/common.mk

CFLAGS = -Wall -Wno-strict-aliasing -O3 -Iinclude

all: install
	cp -rf ./include $(NACL_SDK_ROOT)/include/nativecalls

# Build rules generated by macros from common.mk:
#

#all-in-one
ALLSOURCES = RPCRequest.cpp RPCTransport.cpp JSONRPC.cpp RPCRuntime.cpp RPCType.cpp
$(foreach src,$(ALLSOURCES),$(eval $(call COMPILE_RULE,$(src),$(CFLAGS))))
$(eval $(call LIB_RULE,NativeCalls,$(ALLSOURCES)))

ifeq ($(TOOLCHAIN),glibc)
$(eval $(call SO_RULE,NativeCalls,$(ALLSOURCES)))
endif

