<!DOCTYPE html>
<html>
<head>
  <title>RPC Example</title>
  <script src="../scripts/paths.require.js"></script>
  <script data-main="main" src="../scripts/lib/requirejs/require.js"></script>
</head>
<body>
  <h1>Building</h1>
  <p>Make sure you have built the rpc modules by typing <code>make</code> in each module folder. Alternatively, run <code>make</code> in the handcoded folder to build all demos.</p>

  <h1>Playing with the demos</h1>
  <p>Take a look at each IDL file to see the API each module supports.</p>
  <p>For example, the <code>Fib/Fib.idl</code> file contains the following interface: </p>

  <pre>
interface Fib {
  long fib(unsigned long x);
};
  </pre>

  <p>This allows the JavaScript developer to run the fib method on the Fib module. To do this, simply call the function with its parameters, then give an optional success callback and an optional error callback</p>
  <p>For example, here is the <code>Fib.fib()</code> RPC call.</p>
  <pre>
Fib.fib(23, function(result){
    console.log("The 23rd Fibonacci number is "+result);
});
  </pre>
  <p>This will first load the C++ module, then call the fib C++ function. The result will come to the callback function.</p>

  <p>You can make your own calls by opening the <a href="https://developers.google.com/chrome-developer-tools/docs/console" target="_blank">console</a> and typing in code like the above.</p>


<h2>How it works</h2>
  <p>FibModule is constructed using the RPCModule function. This requires a NaClModule and function definitions.
      The result is a name-spaced set of functions that you can call directly, as in the example above.</p>

  <p>The FibRPCModule is (/will be) generated using the IDL file (Fib.idl).
      This is (/will be) done when <code>Make</code> is called in the <code>Fib</code> folder.
      This means all we need to do is change this IDL file whenever the C++ API you want to expose changes. </p>

<p>For more information about how the RPC works, check ../structure.txt</p>
</body>
</html>
